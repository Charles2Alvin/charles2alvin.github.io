{"ast":null,"code":"var _jsxFileName = \"/Users/mohaitao/Desktop/MyGitPage/charles2alvin.github.io/src/dailyExhibition/dailyExhibitionReact.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Details from '../details/detailsReact';\nimport funcs from '../util/utils';\n\nclass DailyExhibition extends React.Component {\n  constructor(props) {\n    super(props);\n    this.root = props.root;\n    this.toDetails = props.toDetails;\n    this.toExhibition = props.toExhibition;\n    this.galleryList = [];\n    this.displayingGallery = [];\n    this.currentIndex = 0; // this.myArtWork = new Object();\n    // this.myArtWork.id = 0;\n    // const view = new DailyExhibitionView();\n    // view.render(this.root);\n    // ReactDOM.render(\n    //     <Welcome toExhibition={toExhibition}/>,\n    //     document.body.querySelector(\"#welcome\"));\n\n    ReactDOM.render( /*#__PURE__*/React.createElement(DailyExhibitionView, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 25\n      }\n    }), document.body.querySelector(\"#dailyExhibition\")); // this.renderArtwork(root);\n\n    const update = () => {\n      this.renderArtwork(document.body.querySelector(\"#resultDiv\"));\n    };\n\n    update(); // this.displayArtwork = this.displayArtwork.bind(this);\n\n    this.keyUP = event => {\n      if (event.keyCode === 38) {\n        this.toExhibition[0]();\n      }\n    };\n\n    this.keyDetection = event => {\n      // console.log(event.keyCode + \" key pressed\");\n      if (event.keyCode === 37) {\n        this.displayArtwork(this.currentIndex - 1, this.root); // console.log(event.keyCode+\" key pressed\");\n      } else if (event.keyCode === 39) {\n        this.displayArtwork(this.currentIndex + 1, this.root); // console.log(event.keyCode+\" key pressed\");\n      } else if (event.keyCode === 40) {\n        this.toDetails();\n        funcs.updateDetailPage(); // window.removeEventListener(\"keydown\",this.keyDetection,false);\n\n        window.addEventListener(\"keydown\", this.keyUP, false);\n        if (funcs.getCurrentItem()) document.getElementById(\"description\").innerHTML = funcs.getCurrentItem().description;\n      }\n    };\n\n    this.keyDetection = this.keyDetection.bind(this);\n    window.addEventListener(\"keydown\", this.keyDetection, false);\n    document.body.querySelector(\"#dailyExhibition\").addEventListener(\"click\", event => {\n      this.toDetails();\n      funcs.updateDetailPage();\n    }, false);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(DailyExhibitionView, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 16\n      }\n    });\n  }\n\n  renderArtwork(root) {\n    const spinner = this.createSpinner();\n    ReactDOM.render(spinner, document.body.querySelector(\"#dailyExhibition\"));\n    this.displayingGallery = [];\n    funcs.getArtwork()\n    /* TODO: read the params as the values of this.textControl and this.typeControl, in the correct order */\n    .then(artwork => {\n      for (let i = 0; i < artwork.length; i++) {\n        let myArtWork = new Object();\n        myArtWork.id = artwork[i].id;\n        myArtWork.title = artwork[i].title;\n        myArtWork.artist = \"\";\n\n        for (let m = 0; m < artwork[i].artist_titles.length; m++) {\n          myArtWork.artist += artwork[i].artist_titles[m] + \" \";\n        }\n\n        myArtWork.artistDisplay = artwork[i].artist_display;\n        myArtWork.date_start = artwork[i].date_start;\n        myArtWork.date_end = artwork[i].date_end;\n        myArtWork.description = artwork[i].description; // console.log(artwork[i].color);\n\n        if (artwork[i].color) {\n          myArtWork.color_h = artwork[i].color.h;\n          myArtWork.color_l = artwork[i].color.l;\n          myArtWork.color_s = artwork[i].color.s;\n        } // console.log(\"artwork[i].thumbnail: \"+artwork[i].thumbnail);\n\n\n        if (artwork[i].thumbnail) {\n          // console.log(\"artwork[i].thumbnail: \"+artwork[i].thumbnail);\n          // console.log(\"vuyfghkjkhjhjk\");\n          myArtWork.height = artwork[i].thumbnail.height;\n          myArtWork.width = artwork[i].thumbnail.width;\n          myArtWork.image = artwork[i].thumbnail.url + \"/full/\" + artwork[i].thumbnail.width + \",/0/default.jpg\";\n        } // console.log(artwork[i]);\n        // console.log(myArtWork);\n\n\n        this.galleryList.push(myArtWork);\n      }\n\n      ;\n      let num = 0;\n\n      for (let j = 0; j < this.galleryList.length; j++) {\n        if (num < 3) {\n          if (this.galleryList[j].width && this.galleryList[j].description) {\n            this.displayingGallery.push(this.galleryList[j]);\n            num++;\n          }\n        } else {\n          break;\n        }\n      }\n\n      console.log(this.displayingGallery); // console.log(\"sadasdasdasd\");\n      // console.log(this.galleryList);\n\n      console.log(this.displayingGallery[0]);\n      funcs.setCurrentItem(this.displayingGallery[0]);\n      console.log(this.galleryList);\n      this.displayArtwork(0, root); // console.log(\"sadasdasdasd2\");\n    }).catch(err => ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 46\n      }\n    }, err.toString()), document.body.querySelector(\"#dailyExhibition\"))); // .finally(() => spinner.remove())\n  }\n\n  createSpinner() {\n    // return h(\"div\", h(\"img\", { className: \"loadingPicture\", src: \"https://ak6.picdn.net/shutterstock/videos/1011054266/thumb/1.jpg\" }))\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"loadingPicture\",\n      style: {\n        width: \"100%\",\n        height: \"100%\"\n      },\n      src: \"loading.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  displayArtwork(n = 0, root) {\n    if (n > this.displayingGallery.length - 1) n = 0;\n    if (n < 0) n = this.displayingGallery.length - 1;\n    this.currentIndex = n;\n    funcs.setCurrentItem(this.displayingGallery[n]); // if(this.dis)\n    // console.log(this.displayingGallery);\n    // if(!this.displayingGallery)\n\n    console.log(n + \"     \" + this.displayingGallery[n]);\n    ReactDOM.render( /*#__PURE__*/React.createElement(DailyExhibitionView1, {\n      artwork: this.displayingGallery[n],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 30\n      }\n    }), document.body.querySelector(\"#dailyExhibition\")); // return <div></div>\n  }\n\n} // function DisplayCertainArtwork({artwork}){\n//     return <div></div>\n// }\n\n\nfunction DailyExhibitionView1({\n  artwork\n}) {\n  // return h(\"div\", {id:\"resultDiv\"});\n  console.log(artwork.height + \"   width: \" + artwork.width);\n  console.log(artwork.image);\n\n  if (artwork.height > artwork.width) {\n    // if(artwork.width>artwork.height){\n    // return h(\"div\",{style:\"background-color: #000; text-align: center\"}, h(\"img\", { src: artwork.image, style: \"width:100vw\" }))\n    // }else{\n    // return h(\"div\", { style: \"background-color: #000; text-align: center\" }, h(\"img\", { src: artwork.image, style: \"height:100vh\" }))\n    console.log(artwork.image);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"artwork_display\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 16\n      }\n    }, \"  \", /*#__PURE__*/React.createElement(\"img\", {\n      src: artwork.image,\n      style: {\n        height: '100vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 53\n      }\n    })); // \"background-color: #000; text-align: center\"\n    //}\n  } else {\n    // console.log(\"height: \" + artwork.height + \"window width: \" + window.screen.width + \"  window height: \" + window.screen.height);\n    // console.log(\"height/width: \"+ window.screen.height*1.0/window.screen.width);\n    if (artwork.height > window.screen.height * 1.0 / window.screen.width * artwork.width) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"artwork_display\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 20\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n        src: artwork.image,\n        style: {\n          height: \"100vh\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 56\n        }\n      })); // text-align: center\n      // return h(\"div\", { style: \"background-color: #000; text-align: center\" }, h(\"img\", { src: artwork.image, style: \"height:100vh\" }))\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"artwork_display\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 20\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n        src: artwork.image,\n        style: {\n          width: \"100vw\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 56\n        }\n      })); // text-align: center\n      // return h(\"div\", { style: \"background-color: #000; text-align: center\" }, h(\"img\", { src: artwork.image, style: \"width:100vw\" }))\n    }\n  }\n}\n\nfunction DailyExhibitionView() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"resultDiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 12\n    }\n  }); // return h(\"div\", { id: \"resultDiv\" });\n} // const DailyExhibition_funcs={DailyExhibition, DailyExhibitionView1, DailyExhibitionView}\n// export default DailyExhibition_funcs;\n\n\nexport default DailyExhibition;","map":{"version":3,"sources":["/Users/mohaitao/Desktop/MyGitPage/charles2alvin.github.io/src/dailyExhibition/dailyExhibitionReact.js"],"names":["React","ReactDOM","Details","funcs","DailyExhibition","Component","constructor","props","root","toDetails","toExhibition","galleryList","displayingGallery","currentIndex","render","document","body","querySelector","update","renderArtwork","keyUP","event","keyCode","keyDetection","displayArtwork","updateDetailPage","window","addEventListener","getCurrentItem","getElementById","innerHTML","description","bind","spinner","createSpinner","getArtwork","then","artwork","i","length","myArtWork","Object","id","title","artist","m","artist_titles","artistDisplay","artist_display","date_start","date_end","color","color_h","h","color_l","l","color_s","s","thumbnail","height","width","image","url","push","num","j","console","log","setCurrentItem","catch","err","toString","n","DailyExhibitionView1","screen","DailyExhibitionView"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Details from '../details/detailsReact';\nimport funcs from '../util/utils';\nclass DailyExhibition extends React.Component {\n    constructor(props) {\n        super(props);\n        this.root = props.root;\n        this.toDetails = props.toDetails;\n        this.toExhibition = props.toExhibition;\n\n        this.galleryList = [];\n        this.displayingGallery = [];\n        this.currentIndex = 0;\n        // this.myArtWork = new Object();\n        // this.myArtWork.id = 0;\n        // const view = new DailyExhibitionView();\n        // view.render(this.root);\n        // ReactDOM.render(\n        //     <Welcome toExhibition={toExhibition}/>,\n        //     document.body.querySelector(\"#welcome\"));\n\n        ReactDOM.render(<DailyExhibitionView/>, document.body.querySelector(\"#dailyExhibition\"));\n        // this.renderArtwork(root);\n        const update = () => { this.renderArtwork(document.body.querySelector(\"#resultDiv\")) };\n        update();\n        // this.displayArtwork = this.displayArtwork.bind(this);\n\n        this.keyUP = (event) => {\n            if (event.keyCode === 38) {\n                this.toExhibition[0]();\n            }\n        };\n\n\n\n        this.keyDetection = (event) => {\n            // console.log(event.keyCode + \" key pressed\");\n            if (event.keyCode === 37) {\n                this.displayArtwork(this.currentIndex - 1, this.root);\n                // console.log(event.keyCode+\" key pressed\");\n            } else if (event.keyCode === 39) {\n                this.displayArtwork(this.currentIndex + 1, this.root);\n                // console.log(event.keyCode+\" key pressed\");\n            } else if (event.keyCode === 40) {\n                this.toDetails();\n                funcs.updateDetailPage();\n                // window.removeEventListener(\"keydown\",this.keyDetection,false);\n                window.addEventListener(\"keydown\", this.keyUP, false);\n                if(funcs.getCurrentItem())\n                    document.getElementById(\"description\").innerHTML = funcs.getCurrentItem().description;\n            }\n\n        }\n        this.keyDetection = this.keyDetection.bind(this);\n        window.addEventListener(\"keydown\", this.keyDetection, false);\n        document.body.querySelector(\"#dailyExhibition\").addEventListener(\"click\", event=>{\n            this.toDetails();\n            funcs.updateDetailPage();}, false);\n\n    }\n    render(){\n        return <DailyExhibitionView/>\n    }\n    renderArtwork(root) {\n            const spinner = this.createSpinner();\n            ReactDOM.render(spinner,document.body.querySelector(\"#dailyExhibition\"));\n            this.displayingGallery = [];\n\n\n            funcs.getArtwork() /* TODO: read the params as the values of this.textControl and this.typeControl, in the correct order */\n                .then(artwork => {\n                    for (let i = 0; i < artwork.length; i++) {\n\n                        let myArtWork = new Object();\n                        myArtWork.id = artwork[i].id;\n                        myArtWork.title = artwork[i].title;\n                        myArtWork.artist = \"\";\n                        for (let m = 0; m < artwork[i].artist_titles.length; m++) {\n                            myArtWork.artist += artwork[i].artist_titles[m] + \" \";\n                        }\n                        myArtWork.artistDisplay = artwork[i].artist_display;\n                        myArtWork.date_start = artwork[i].date_start;\n                        myArtWork.date_end = artwork[i].date_end;\n                        myArtWork.description = artwork[i].description;\n                        // console.log(artwork[i].color);\n                        if (artwork[i].color) {\n                            myArtWork.color_h = artwork[i].color.h;\n                            myArtWork.color_l = artwork[i].color.l;\n                            myArtWork.color_s = artwork[i].color.s;\n                        }\n                        // console.log(\"artwork[i].thumbnail: \"+artwork[i].thumbnail);\n                        if(artwork[i].thumbnail){\n                            // console.log(\"artwork[i].thumbnail: \"+artwork[i].thumbnail);\n                            // console.log(\"vuyfghkjkhjhjk\");\n                            myArtWork.height = artwork[i].thumbnail.height;\n                            myArtWork.width = artwork[i].thumbnail.width;\n                            myArtWork.image = artwork[i].thumbnail.url + \"/full/\" + artwork[i].thumbnail.width + \",/0/default.jpg\";\n                        }\n                        // console.log(artwork[i]);\n                        // console.log(myArtWork);\n                        this.galleryList.push(myArtWork);\n                    };\n                    let num = 0;\n                    for (let j = 0; j < this.galleryList.length; j++) {\n                        if (num < 3) {\n                            if (this.galleryList[j].width && this.galleryList[j].description) {\n                                this.displayingGallery.push(this.galleryList[j]);\n                                num++;\n                            }\n                        } else {\n                            break;\n                        }\n                    }\n                    console.log(this.displayingGallery);\n                    // console.log(\"sadasdasdasd\");\n                    // console.log(this.galleryList);\n                    console.log(this.displayingGallery[0]);\n                    funcs.setCurrentItem(this.displayingGallery[0]);\n                    console.log(this.galleryList);\n                    this.displayArtwork(0, root);\n                    \n                    // console.log(\"sadasdasdasd2\");\n                })\n                .catch(err=> ReactDOM.render(<div>{err.toString()}</div>,document.body.querySelector(\"#dailyExhibition\")))\n                // .finally(() => spinner.remove())\n        }\n    createSpinner() {\n        // return h(\"div\", h(\"img\", { className: \"loadingPicture\", src: \"https://ak6.picdn.net/shutterstock/videos/1011054266/thumb/1.jpg\" }))\n        return <div>\n                    <img className= \"loadingPicture\" style={{width: \"100%\", height: \"100%\"}} src= \"loading.png\"></img>\n                </div>\n    }\n\n    displayArtwork(n = 0, root) {\n\n        if (n > this.displayingGallery.length - 1)\n            n = 0;\n        if (n < 0)\n            n = this.displayingGallery.length - 1;\n\n        this.currentIndex = n;\n        funcs.setCurrentItem(this.displayingGallery[n]);\n        // if(this.dis)\n        // console.log(this.displayingGallery);\n        // if(!this.displayingGallery)\n        console.log(n+\"     \"+this.displayingGallery[n]);\n            ReactDOM.render((<DailyExhibitionView1 artwork = {this.displayingGallery[n]}></DailyExhibitionView1>), document.body.querySelector(\"#dailyExhibition\"));\n        // return <div></div>\n    }\n\n\n}\n// function DisplayCertainArtwork({artwork}){\n//     return <div></div>\n// }\n\nfunction DailyExhibitionView1({artwork}) {\n    // return h(\"div\", {id:\"resultDiv\"});\n    console.log(artwork.height + \"   width: \" + artwork.width);\n    console.log(artwork.image);\n    if (artwork.height > artwork.width) {\n        // if(artwork.width>artwork.height){\n        // return h(\"div\",{style:\"background-color: #000; text-align: center\"}, h(\"img\", { src: artwork.image, style: \"width:100vw\" }))\n        // }else{\n        // return h(\"div\", { style: \"background-color: #000; text-align: center\" }, h(\"img\", { src: artwork.image, style: \"height:100vh\" }))\n        console.log(artwork.image);\n        return <div className = \"artwork_display\">  <img src= {artwork.image} style= {{height:'100vh'}}></img></div> \n        // \"background-color: #000; text-align: center\"\n    //}\n    } else {\n        // console.log(\"height: \" + artwork.height + \"window width: \" + window.screen.width + \"  window height: \" + window.screen.height);\n        // console.log(\"height/width: \"+ window.screen.height*1.0/window.screen.width);\n        if (artwork.height > window.screen.height*1.0/window.screen.width* artwork.width) {\n            return <div className = \"artwork_display\"> <img src= {artwork.image} style={{height:\"100vh\"}}></img></div>\n            // text-align: center\n            // return h(\"div\", { style: \"background-color: #000; text-align: center\" }, h(\"img\", { src: artwork.image, style: \"height:100vh\" }))\n        } else {\n            return <div className = \"artwork_display\"> <img src={artwork.image} style= {{width:\"100vw\"}}></img></div>\n            // text-align: center\n            // return h(\"div\", { style: \"background-color: #000; text-align: center\" }, h(\"img\", { src: artwork.image, style: \"width:100vw\" }))\n        }\n    }\n}\n\nfunction DailyExhibitionView() {\n    return <div id=\"resultDiv\"></div>\n    // return h(\"div\", { id: \"resultDiv\" });\n\n}\n// const DailyExhibition_funcs={DailyExhibition, DailyExhibitionView1, DailyExhibitionView}\n// export default DailyExhibition_funcs;\nexport default DailyExhibition;"]},"metadata":{},"sourceType":"module"}